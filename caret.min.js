!function(e,t,n,r){e.fn.caret=function(i,o){var a,l,s=this[0],c=e.browser.msie;if("object"==typeof i&&"number"==typeof i.start&&"number"==typeof i.end?(a=i.start,l=i.end):"number"==typeof i&&"number"==typeof o?(a=i,l=o):"string"==typeof i?(a=s.value.indexOf(i))>-1?l=a+i[t]:a=null:"[object RegExp]"===Object.prototype.toString.call(i)&&(i=i.exec(s.value),null!=i&&(a=i.index,l=a+i[0][t])),"undefined"!=typeof a)return c?(c=this[0].createTextRange(),c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",l-a),c.select()):(this[0].selectionStart=a,this[0].selectionEnd=l),this[0].focus(),this;if(c)if(l=document.selection,"textarea"!=this[0].tagName.toLowerCase()){c=this.val(),a=l[n]()[r](),a.moveEnd("character",c[t]);var u=""==a.text?c[t]:c.lastIndexOf(a.text);a=l[n]()[r](),a.moveStart("character",-c[t]);var d=a.text[t]}else a=l[n](),l=a[r](),l.moveToElementText(this[0]),l.setEndPoint("EndToEnd",a),u=l.text[t]-a.text[t],d=u+a.text[t];else u=s.selectionStart,d=s.selectionEnd;return a=s.value.substring(u,d),{start:u,end:d,text:a,replace:function(e){return s.value.substring(0,u)+e+s.value.substring(d,s.value[t])}}}}(jQuery,"length","createRange","duplicate");